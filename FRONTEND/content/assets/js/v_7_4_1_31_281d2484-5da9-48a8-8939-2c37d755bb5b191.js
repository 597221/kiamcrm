import{j as e,ad as _,bi as G,bk as $,bc as H}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b10.js";import{u as P}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b19.js";import{b as C}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b97.js";import{a as n}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b4.js";import{c as W,d as K,e as z,a as V,b as q,s as J,g as U,r as X,m as Y}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b190.js";import{B as R,x as I,D as Z,m as ee,G as te,a as re,p as se,t as O,b as ie}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b198.js";import{$ as T,p as k}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b23.js";import{i as w}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b9.js";import{R as ne}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b5.js";import{S as oe}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b200.js";import{c as ae}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b169.js";import{o as ce}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b40.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b18.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b8.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b7.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b35.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b123.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b122.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b6.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b2.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b3.js";const A=Symbol("item"),L={type:"idle"},M={type:"dragging"};function D(t){return t[A]===!0}function le({item:t,index:s,instanceId:p}){return{[A]:!0,item:t,index:s,instanceId:p}}const B=n.createContext(null);function de(){const t=n.useContext(B);return w(t!==null),t}const pe=I({flexGrow:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"});function ue({script:t,index:s}){const{getQuickReply:p}=T(),{setScript:i,deleteScript:m}=C(),{close:b}=k(),{language:h}=P(),g=l=>{l.stopPropagation(),m(s),b()};return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[var(--primary-strong)] p-[6px] bg-base-200 rounded-md",children:e.jsx(ae,{size:14})}),t.id.length!==0&&e.jsx("span",{children:e.jsx(_,{type:p(t.id,"type")})}),e.jsx(R,{xcss:pe,children:t.id.length!==0?p(t.id,"titulo"):e.jsx("em",{className:"text-red-500",children:h.selectQuickReply})}),s!==0&&e.jsx("div",{className:"w-10 animate__animated group/item",children:e.jsx("input",{type:"number",className:"w-10 border border-solid rounded-md text-center font-semibold bg-base-200 group-hover/item:border-[var(--primaria)] focus:border-[var(--primaria)]",value:t.timer,min:0,onClick:l=>l.stopPropagation(),onChange:l=>{const j=parseInt(l.target.value);l.target.value.length<=2&&i(s,"timer",j),j<0&&i(s,"timer",0)}})}),e.jsx("span",{className:"animate__animated animate__zoomIn pulse hidden text-red-500 cursor-pointer group-hover:block",onClick:g,children:e.jsx(G,{size:18})})]})}const me=I({position:"relative"}),ge=I({width:"100%",flexShrink:"0",height:"34px",boxSizing:"border-box",display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"space-between",padding:"space.050",position:"relative",borderWidth:"border.width",borderStyle:"solid",borderRadius:"8px",cursor:"grab"}),xe=I({paddingBlock:"space.050",paddingInline:"space.100",borderRadius:"border.radius.100",maxWidth:"360px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),fe=I({opacity:.4});function he({item:t,index:s,position:p}){const{getQuickReply:i}=T(),{open:m}=k(),{setScript:b,quickReply:h}=C(),{registerItem:g,instanceId:x}=de(),l=n.useRef(null),[j,r]=n.useState(null),u=n.useRef(null),[f,a]=n.useState(L);n.useEffect(()=>{const c=l.current,o=u.current;w(c),w(o);const y=le({item:t,index:s,instanceId:x});return W(g({itemId:t.id,element:c}),q({element:o,getInitialData:()=>y,onGenerateDragPreview({nativeSetDragImage:v}){J({nativeSetDragImage:v,getOffset:se({x:O("space.200","16px"),y:O("space.100","8px")}),render({container:S}){return a({type:"preview",container:S}),()=>a(M)}})},onDragStart(){a(M)},onDrop(){a(L)}}),K({element:c,canDrop({source:v}){return D(v.data)&&v.data.instanceId===x},getData({input:v}){return V(y,{element:c,input:v,allowedEdges:["top","bottom"]})},onDrag({self:v,source:S}){if(S.element===c){r(null);return}const E=z(v.data),N=S.data.index;w(typeof N=="number");const F=s===N-1,Q=s===N+1;if(F&&E==="bottom"||Q&&E==="top"){r(null);return}r(E)},onDragLeave(){r(null)},onDrop(){r(null)}}))},[x,t,s,g]);const d=c=>{m(e.jsx(oe,{ignoredIds:h.script.map(o=>o.id),ignoredTypes:["script"],onSelect:({id:o})=>b(s,"id",o)}),{placement:"left-end"},document.getElementById(`script_${t.id}`),10,{mounted:()=>{var o;return(o=document.getElementById(`script_${t.id}`))==null?void 0:o.classList.add("!border-[var(--primaria)]")},desmouted:()=>{var o;return(o=document.getElementById(`script_${t.id}`))==null?void 0:o.classList.remove("!border-[var(--primaria)]")}})};return e.jsxs(n.Fragment,{children:[e.jsxs(R,{ref:l,xcss:me,children:[e.jsx(Z,{trigger:({triggerRef:c,...o})=>e.jsx("div",{className:"group",ref:ee([u,c]),...o,onClick:d,"style-inject":"grid-atlassian",children:e.jsx(te,{id:`script_${t.id}`,alignItems:"center",columnGap:"space.100",templateColumns:"auto 1fr auto",xcss:[ge,f.type==="dragging"&&fe],children:e.jsx(ue,{script:t,index:s})})})}),j&&e.jsx("div",{className:"tema-indicador",children:e.jsx(re,{edge:j,gap:"1px"})})]}),f.type==="preview"&&ne.createPortal(e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"ml-2",children:e.jsx(_,{type:i(t.id,"type")})}),e.jsx(R,{xcss:xe,children:i(t.id,"titulo")})]}),f.container)]})}function ve({index:t,items:s}){return s.length===1?"only":t===0?"first":t===s.length-1?"last":"middle"}function be(){const t=new Map;function s({itemId:i,element:m}){return t.set(i,m),function(){t.delete(i)}}function p(i){return t.get(i)??null}return{register:s,getElement:p}}function je(){const{quickReply:t,sortScript:s}=C(),{close:p}=k(),[{items:i,lastCardMoved:m},b]=n.useState({items:[],lastCardMoved:null}),[h]=n.useState(be);n.useEffect(()=>{b(r=>({...r,items:(t==null?void 0:t.script)||[]}))},[t]);const[g]=n.useState(()=>Symbol("instance-id")),x=n.useCallback(({startIndex:r,indexOfTarget:u,closestEdgeOfTarget:f})=>{const a=U({startIndex:r,closestEdgeOfTarget:f,indexOfTarget:u,axis:"vertical"});a!==r&&(b(d=>{const c=d.items[r];return{items:X({list:d.items,startIndex:r,finishIndex:a}),lastCardMoved:{item:c,previousIndex:r,currentIndex:a,numberOfItems:d.items.length}}}),p(),s({oldIndex:r,newIndex:a}))},[]);n.useEffect(()=>Y({canMonitor({source:r}){return D(r.data)&&r.data.instanceId===g},onDrop({location:r,source:u}){const f=r.current.dropTargets[0];if(!f)return;const a=u.data,d=f.data;if(!D(a)||!D(d))return;const c=i.findIndex(y=>y.id===d.item.id);if(c<0)return;const o=z(d);x({startIndex:a.index,indexOfTarget:c,closestEdgeOfTarget:o})}}),[g,i,x]),n.useEffect(()=>{if(m===null)return;const{item:r,previousIndex:u,currentIndex:f,numberOfItems:a}=m,d=h.getElement(r.id);d&&ie(d)},[m,h]);const l=n.useCallback(()=>i.length,[i.length]),j=n.useMemo(()=>({registerItem:h.register,reorderItem:x,instanceId:g,getListLength:l}),[h.register,x,g,l]);return e.jsx(B.Provider,{value:j,children:e.jsx("div",{className:"pb-1 flex flex-col gap-[6px]",children:i.map((r,u)=>e.jsx(he,{item:r,index:u,position:ve({index:u,items:i})},r.id))})})}function We(){const{language:t}=P(),{addScript:s}=C();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{children:t.script}),e.jsx("div",{className:"cursor-pointer lg:tooltip lg:tooltip-bottom before:!w-[120px]","data-tip":t.scriptIncludeTypingAudio,children:e.jsx("div",{className:"pulse text-[var(--icon)]",children:e.jsx($,{size:20})})}),e.jsx("div",{className:"cursor-pointer lg:tooltip lg:tooltip-bottom before:!w-[120px]","data-tip":t.script_reorganize,children:e.jsx("div",{className:"pulse text-[var(--icon)] pb-[2px]",children:e.jsx(ce,{size:17})})})]}),e.jsx("div",{children:e.jsx("h2",{children:t.intervalo})})]}),e.jsx(je,{}),e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx("div",{onClick:s,className:"cursor-pointer lg:tooltip lg:tooltip-top","data-tip":t.addMoreQuickReply,children:e.jsx("div",{className:"pulse",children:e.jsx(H,{size:30,className:"text-[var(--primaria)]"})})})})]})}export{We as default};
