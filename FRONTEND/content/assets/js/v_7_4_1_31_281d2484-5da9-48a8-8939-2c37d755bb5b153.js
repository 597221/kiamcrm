import{j as e,_ as X,y as q,a0 as Q,ab as J,ao as K,Q as Y,U as Z,ah as ee}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b10.js";import{a as c}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b4.js";import{p as te,F as ae}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b5.js";import{u as se}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b33.js";import{u as ne}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b19.js";import{q as re,D as ie,o as le,p as oe,U as ce,aM as de}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b23.js";import{A as _}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b211.js";import{R as me}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b212.js";import{W as w}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b18.js";import{a as xe}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b111.js";import{U as pe}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b64.js";import{a as fe,b as he}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b169.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b8.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b7.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b6.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b9.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b2.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b3.js";const ue=c.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b210.js")),[]));function ge(){return e.jsx(c.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(ue,{})})}function je({userId:l,name:d}){const{label:D}=re(),{variaveisWA:f}=ie(),{agendamentos:x,agendamentosNaoDisparados:h,removeAgendamento:A,buttonActive:i,setButtonActive:C,openUserChat:I}=se(),[j,b]=c.useState(!1),[m,M]=c.useState(i?x:x.filter(t=>t.userID===l)),{language:s}=ne(),[T,E]=c.useState(new Map),k=async t=>{const r=await w.Contact("getProfilePictureUrl",t),{name:a}=await w.Utils("getContato",t);return{nome:a,base64:r}},H=async t=>{const r=Array.from(new Set(t.map(n=>n.userID))),a=new Map;for(const n of r){const o=await k(n);a.set(n,o)}E(a)};c.useEffect(()=>{H(m)},[m]);const u=t=>T.get(t)||{nome:"",base64:""};c.useEffect(()=>{const t=new Date().getTime(),a=(i?x:x.filter(n=>n.userID===l)).sort((n,o)=>{const B=new Date(`${n.data}T${n.hora}:00`).getTime(),G=new Date(`${o.data}T${o.hora}:00`).getTime(),F=Math.abs(B-t),V=Math.abs(G-t);return F-V});M(a)},[x,i,l,h]);const{open:p}=le(),{open:L}=oe(),v=50,y=37,N="calc(85vh - 300px)",g="950px",S=()=>{const t=m.length*v+y,r=parseInt(N.replace(/[^\d]/g,""));return Math.min(t,r)},z=t=>{p(e.jsx(_,{agendamento:t,create:!1,userId:l,name:d,tipo:"agendamento"}))},U=async()=>{p(e.jsx(_,{agendamento:null,create:!0,userId:l,name:d,tipo:"agendamento"}))},$=(t,r,a=!0)=>{const n=r,o=r.parentElement;L(t,{placement:"bottom-end"},n,0,{mounted:()=>{o.classList.add("_ajv9"),a&&n.classList.add("x11t6m9b")},desmouted:()=>{o.classList.remove("_ajv9"),n.classList.remove("x11t6m9b")}})},O=t=>{I(t.userID),p(e.jsx(je,{userId:t.userID,name:d}))},P=({index:t,style:r})=>{const a=m[t];return e.jsxs("div",{style:r,className:"flex items-center rounded-lg hover:bg-base-200 cursor-pointer h-full border-solid border-b border-[var(--border-list)] last-of-type:border-none",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("span",{className:"break-words truncate",style:{maxWidth:"100px"},children:a.titulo})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[u(a.userID).base64==="undefined"?e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",children:e.jsx(pe,{})}):e.jsx("img",{src:u(a.userID).base64,className:"w-8 h-8 rounded-full object-cover",alt:"User"}),e.jsx("p",{className:"break-words truncate",style:{maxWidth:"92px"},children:u(a.userID).nome})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.tipo}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:Z.converterData(a.data)}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.hora}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.recorrenciaManual?a.recorrencia?`${a.recorrencia} ${s.dias}`:s.vazia:s[a.recorrencia]||s.vazia}),e.jsxs("div",{className:"flex-1 flex items-center justify-center gap-1",children:[e.jsx("span",{className:"pulse",onClick:()=>z(a),children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx("span",{className:"pulse",onClick:()=>A(a.id,"agendamento"),children:e.jsx(xe,{className:"h-4 w-4"})}),i&&l!==a.userID&&e.jsx("span",{className:"pulse lg:tooltip lg:tooltip-left",onClick:()=>O(a),"data-tip":s.agenOpenChat,children:e.jsx(de,{className:"h-4 w-4"})})]})]},a.id)},R=()=>e.jsx("div",{className:"w-full border-collapse",children:e.jsxs("div",{className:"flex font-bold",children:[e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_titulo}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_cliente}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_tipo}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_data}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_hora}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_recorrencia}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_acao})]})}),W=()=>{b(!0),C(!i),setTimeout(()=>{b(!1)},700)};return e.jsxs("div",{className:"grid gap-4",style:{maxHeight:"90vh",width:g},children:[e.jsxs("div",{className:"w-full flex items-center justify-between pr-2",children:[e.jsx("div",{className:`${j?"animate__animated animate__fadeIn":""}`,children:e.jsxs(q,{children:[i&&s.todas," ",s.agendamento_title," ",d?s.para+" "+d:""]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"bg-transparent border-solid border-[var(--primaria)] border rounded-lg text-[var(--primaria)] text-sm text-center self-center px-3 py-[4px] pulse relative",onClick:()=>p(e.jsx(me,{userId:l,name:d})),children:[e.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[s.relatorio,e.jsx(ce,{})]}),e.jsx("div",{className:"badge badge-primary !bg-[var(--primaria)] !text-white badge-sm absolute -top-2 -right-2",children:i?h.length:h.filter(t=>t.userID===l).length})]}),e.jsx("button",{className:`border-solid border-[var(--primary)] border rounded-full text-center
            ${i?"bg-[var(--primary-muted)] text-white":"bg-transparent text-[var(--primary)]"}
            self-center px-3 py-[4px] pulse lg:tooltip lg:tooltip-bottom text-sm transition-all duration-300 ease-in`,onClick:()=>W(),"data-tip":i?s.ocultarContatosDesc:s.exibirContatosDesc,children:e.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[i?s.ocultar:s.exibirTodos,i?e.jsx(fe,{}):e.jsx(he,{})]})}),e.jsx("div",{className:f.confgIcone+"cursor-pointer pulse flex items-center justify-center !ml-0",children:e.jsx("div",{onClick:t=>$(e.jsx(ge,{}),t.currentTarget),className:f.iconeStyle+"cursor-pointer x11xpdln x1d8287x x1h4ghdb",children:e.jsx("span",{className:f.modalOptions.animChildren+"flex items-center justify-center",children:e.jsx(Q,{className:D.cor_primaria?"text-[var(--primaria)]":"text-[var(--panel-header-icon)]",size:20})})})})]})]}),e.jsx("div",{className:`${j?"animate__animated animate__fadeIn":""}`,children:m.length>0?e.jsxs("div",{style:{height:S(),maxHeight:N,width:"100%"},children:[e.jsx(R,{}),e.jsx(te,{children:({height:t,width:r})=>e.jsx(ae,{height:t-y,itemCount:m.length,itemSize:v,width:g,style:{overflowX:"hidden",width:g,minHeight:"50px"},children:P})})]}):e.jsx("div",{className:"!h-fit",children:e.jsx(J,{title:s.agendamentoEmptyTitle,description:s.agendamentoEmptyDesc,icon:e.jsx(K,{className:"w-7 h-7 text-[var(--primaria)]"})})})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Y,{name:s.create,funcao:U})})]})}export{je as default};
