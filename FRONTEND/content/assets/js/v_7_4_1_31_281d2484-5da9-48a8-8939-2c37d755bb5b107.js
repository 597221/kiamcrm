import{a as k,C as D,R as C,I as b,j as t,_ as y,J as N,y as E,aZ as I,a_ as S,V as T,K as F,Q as L}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b10.js";import{a as m}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b4.js";import{u as h,b as P}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b19.js";import{aj as z,ak as H,al as O,am as U,an as V,ao as K,ap as W,aq as q,ar as $,as as G,at as J,au as Q,av as Y,aw as Z,ax as X,ay as ee,az as se,o as B,n as w,q as ae,F as te,O as oe}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b23.js";import{k as re,j as ce,i as ne}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b21.js";import{b as ie,B as ue}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b31.js";import{M as le,R as pe,f as de,b as me,c as he,d as fe}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b25.js";import{M as ge,R as be}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b33.js";import{a as A}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b32.js";import{M as ke,R as je}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b27.js";import{M as xe,R as Be}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b28.js";import{M as ye,R as ve}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b26.js";import{M as Ne,R as we}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b30.js";import{r as Ae}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b34.js";import{c as Re}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b7.js";import{B as Me}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b73.js";import{e as _e}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b167.js";import{V as v}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b18.js";const R=async e=>{A.setState({notes:e}),await k("notes",e),chrome.runtime.sendMessage({action:"notesBackup"})},De=e=>{const s=[...A.getState().notes];e.forEach(a=>{const o=s.findIndex(c=>c.id===a.id);o===-1?s.push(a):s[o]=a}),R(s)},r=(e,s)=>{console.error(`Erro ao realizar a importação do backup: [${e}] `,s)},i=(e,s,a)=>{try{const{backup:o}=M.getState();if(s&&typeof o[e]=="string"){const c=D.decryptData(o[e]);return typeof c===a?{success:!0,backup:c}:{success:!1,backup:null}}else return typeof o[e]===a?{success:!0,backup:o[e]}:{success:!1,backup:null}}catch(o){return console.error("Error ao descompactar backup, key:",e,"erro da operação:",o),{success:!1,backup:null}}};function Ce(e,s,a){switch(e){case"respostasRapidas":Ee(i(e,s,"object"),i("categoria",s,"object"),i("respostasRapidasAcao",s,"object"),i("guardaMsg",s,"object"),i("medias",s,"object"),a);break;case"respostasRapidasAcao":case"guardaMsg":case"categoria":case"medias":console.warn(`A funcionalidade para "${e}" está inclusa em guardaMsg`);break;case"agendamentos":Se(i(e,s,"object"),i("agendamentosNaoDisparados",s,"object"),i("sendAfterWhatsAppOpens",s,"object"),a);break;case"agendamentosNaoDisparados":case"sendAfterWhatsAppOpens":console.warn(`A funcionalidade para "${e}" está inclusa em agendamentos`);break;case"crm":Te(i(e,s,"object"),a);break;case"contatos":Fe(i(e,s,"object"),a);break;case"notes":Le(i(e,s,"object"),a);break;case"notifications":Pe(i(e,s,"object"),a);break;case"perfil":ze(i(e,s,"object"),a);break;case"userTabs":He(i(e,s,"object"),a);break;case"agrupamentos":Oe(i(e,s,"object"),a);break;case"relatorio":Ue(i(e,s,"object"),a);break;case"encomendas":Ve(i(e,s,"object"),a);break;case"autoatendimento":Ke(i(e,s,"object"),a);break;case"webhook":qe(i(e,s,"object"));break;case"IA":$e(i(e,s,"object"));break;case"status":Ge(i(e,s,"object"),a);break;case"pinChat":Je(i(e,s,"object"),a);break;case"atendimento":Qe(i(e,s,"object"));break;case"backupAutomatico":Ye(i(e,s,"object"));break;case"whatsApi":Ze(i(e,s,"object"));break;case"FollowUp":We(i(e,s,"object"),a);break;case"fluxo":Ie(i(e,s,"object"),i("fluxoFiles",s,"object"),a);break;default:console.error("Chave de importação desconhecida:",e);break}}const Ee=(e,s,a,o,c,l)=>{try{if(!e.success&&!o.success){r("respostasRapidas, guardaMsg","[DescompressBackup] => Não retornou sucesso");return}e.success||(e.backup=[],console.warn("[respostasRapidas] => Vazio")),s.success||(s.backup=[],console.warn("[categoria] => Vazio")),a.success||(a.backup=[],console.warn("[respostasRapidasAcao] => Vazio")),o.success||(o.backup=[],console.warn("[guardaMsg] => Vazio")),c.success||(c.backup=[],console.warn("[medias] => Vazio"));const n=de(e.backup,o.backup),u=me(a.backup,c.backup,e.backup,o.backup);l?he(u,n,s.backup):fe(u,n,s.backup)}catch(n){r("guardaMsg, categoria, medias",n)}},Ie=(e,s,a)=>{try{if(!e.success){r("fluxo","[DescompressBackup] => Não retornou sucesso");return}const o=e.backup;s.success&&k("fluxoFiles",s.backup),a?z(o):H(o),chrome.runtime.sendMessage({action:"reloadFluxo"})}catch(o){r("fluxo",o)}},Se=(e,s,a,o)=>{try{let c=s.backup,l=a.backup;if(!e.success){r("agendamentos","[DescompressBackup] => Não retornou sucesso");return}s.success||(c=[],r("agendamentosNaoDisparados","[DescompressBackup] => Não retornou sucesso")),a.success||(l=!1,r("sendAfterWhatsAppOpens","[DescompressBackup] => Não retornou sucesso")),o?ge(e.backup,c,l):be(e.backup,c,l)}catch{}},Te=async({success:e,backup:s},a)=>{try{if(!e){r("crm","[DescompressBackup] => Não retornou sucesso");return}if(a){const o=await C("crm"),c=new Set,l=o.filter(p=>c.has(p.id)?!1:(c.add(p.id),!0)),n=s.filter(p=>!c.has(p.id)),u=l.concat(n);await k("crm",u),chrome.runtime.sendMessage({action:"post-crm"})}else await k("crm",s),chrome.runtime.sendMessage({action:"post-crm"})}catch(o){r("crm",o)}},Fe=({success:e,backup:s},a)=>{try{if(!e){r("contatos","[DescompressBackup] => Não retornou sucesso");return}a?ee(s):se(s)}catch(o){r("contatos",o)}},Le=({success:e,backup:s},a)=>{try{if(!e){r("notes","[DescompressBackup] => Não retornou sucesso");return}a?De(s):R(s)}catch(o){r("notes",o)}},Pe=({success:e,backup:s},a)=>{try{if(!e){r("notifications","[DescompressBackup] => Não retornou sucesso");return}a?ke(s):je(s)}catch(o){r("notifications",o)}},ze=({success:e,backup:s},a)=>{try{if(!e){r("perfil","[DescompressBackup] => Não retornou sucesso");return}a?Z(s):X(s)}catch(o){r("perfil",o)}},He=({success:e,backup:s},a)=>{try{if(!e){r("userTabs","[DescompressBackup] => Não retornou sucesso");return}a?le(s):pe(s)}catch(o){r("userTabs",o)}},Oe=({success:e,backup:s},a)=>{try{if(!e){r("agrupamentos","[DescompressBackup] => Não retornou sucesso");return}a?xe(s):Be(s)}catch(o){r("agrupamentos",o)}},Ue=({success:e,backup:s},a)=>{try{if(!e){r("relatorio","[DescompressBackup] => Não retornou sucesso");return}a?Q(s):Y(s)}catch(o){r("relatorio",o)}},Ve=({success:e,backup:s},a)=>{try{if(!e){r("encomendas","[DescompressBackup] => Não retornou sucesso");return}a?ye(s):ve(s)}catch(o){r("encomendas",o)}},Ke=({success:e,backup:s},a)=>{try{if(!e){r("autoatendimento","[DescompressBackup] => Não retornou sucesso");return}a?G(s):J(s)}catch(o){r("autoatendimento",o)}},We=({success:e,backup:s},a)=>{try{if(!e){r("autoatendimento","[DescompressBackup] => Não retornou sucesso");return}a?O(s):U(s)}catch(o){r("autoatendimento",o)}},qe=({success:e,backup:s})=>{try{if(!e){r("webhook","[DescompressBackup] => Não retornou sucesso");return}$(s)}catch(a){r("webhook",a)}},$e=({success:e,backup:s})=>{try{if(!e){r("IA","[DescompressBackup] => Não retornou sucesso");return}q(s)}catch(a){r("IA",a)}},Ge=({success:e,backup:s},a)=>{try{if(!e){r("status","[DescompressBackup] => Não retornou sucesso");return}a?Ne(s):we(s)}catch(o){r("status",o)}},Je=({success:e,backup:s},a)=>{try{if(!e){r("pinChat","[DescompressBackup] => Não retornou sucesso");return}a?K(s):W(s)}catch(o){r("pinChat",o)}},Qe=({success:e,backup:s})=>{try{if(!e){r("atendimento","[DescompressBackup] => Não retornou sucesso");return}V(s)}catch(a){r("atendimento",a)}},Ye=({success:e,backup:s})=>{try{if(!e){r("backupAutomatico","[DescompressBackup] => Não retornou sucesso");return}ie(s)}catch(a){r("backupAutomatico",a)}},Ze=({success:e,backup:s})=>{try{if(!e){r("whatsApi","[DescompressBackup] => Não retornou sucesso");return}Ae(s)}catch(a){r("whatsApi",a)}},M=Re()((e,s)=>({backup:null,keys:[],extractFile:a=>{const{language:o}=h.getState(),{close:c}=B.getState(),l=new FileReader;l.readAsText(a,"UTF-8"),l.onload=n=>{try{const u=JSON.parse(n.target.result);if(typeof u!="object"){b({type:"Error",message:o.fileNotBK,position:"top-right"});return}const p=ue.filter(f=>f.keys.some(g=>f.tag==="all"?!0:!!u[g.key]));e({keys:p,backup:u})}catch(u){c(),console.error("Erro ao importar Backup",u),b({type:"Error",message:o.fileNotBK,position:"top-right"})}}},setActiveKey:(a,o)=>e(c=>({keys:c.keys.map(n=>a==="all"?{...n,checked:o}:n.tag===a?{...n,checked:o}:n.tag==="all"&&!o?{...n,checked:!1}:n)})),setActiveMerge:(a,o)=>e(c=>({keys:c.keys.map(n=>a==="all"?{...n,merge:o}:n.tag===a?{...n,merge:o}:n.tag==="all"&&!o?{...n,merge:!1}:n)})),formatBackup:()=>{const{keys:a}=s(),{close:o,openRendertype:c}=B.getState(),{language:l}=h.getState(),{user:n}=w.getState();if(!a.find(u=>u.checked)){b({type:"Error",message:l.selectBkItemImport,position:"top-right"});return}if(!n.estado){c("user_free");return}for(const u of a)if(u.tag!=="all"&&u.checked)for(const p of u.keys)Ce(p.key,p.compress,u.merge);o(),b({type:"Success",message:l.backupImported,position:"top-right"})}}));function Xe(){const{idioma:e,setIdioma:s}=h(),a=c=>{s(c),chrome.runtime.sendMessage({action:"languageReload",lang:c})};return t.jsxs("select",{className:"select pt-0 select-bordered select-sm w-fit max-w-xs shadow-sm",value:e,onChange:c=>{a(c.target.value)},id:"select-language",children:[t.jsx("option",{value:"pt",children:"Português"}),t.jsx("option",{value:"es",children:"Español"}),t.jsx("option",{value:"en",children:"English"})]})}const es=m.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b171.js")),[]));function ss(){return t.jsx(m.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(es,{})})}const as=m.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b172.js")),[]));function ts(){return t.jsx(m.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(as,{})})}const os=m.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b173.js")),[]));function rs(){return t.jsx(m.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(os,{})})}function cs(){const{privacityOptions:e,setPrivacityOptions:s}=re(),{language:a}=h(),o=n=>{s({...e,[n]:{hide:!e[n].hide}})},c=[{tag:"photoHidden",nome:a.ocutar_foto,checked:e.photoHidden.hide},{tag:"nameHidden",nome:a.ocutar_nome,checked:e.nameHidden.hide},{tag:"midiaHidden",nome:a.ocutar_midia,checked:e.midiaHidden.hide},{tag:"galeryHidden",nome:a.ocutar_galeria,checked:e.galeryHidden.hide},{tag:"lastMessageHidden",nome:a.ocutar_mensagem,checked:e.lastMessageHidden.hide},{tag:"messageHidden",nome:a.ocutar_chat,checked:e.messageHidden.hide}];return t.jsx(t.Fragment,{children:c.map((n,u)=>t.jsx("label",{htmlFor:n.tag,children:t.jsxs("div",{className:"flex justify-between cursor-pointer items-center h-9 py-2 rounded-lg hover:bg-[var(--dropdown-background-hover)] px-2",children:[t.jsx("span",{children:n.nome}),t.jsx(N,{id:n.tag,switchUpdate:()=>{o(n.tag)},estado:n.checked})]})},u))})}const d="flex justify-between cursor-pointer items-center h-9 py-2 rounded-lg hover:bg-[var(--dropdown-background-hover)] px-2";function ns(){const{language:e}=h(),{theme:s,setTheme:a}=P(),{open:o}=B(),{close:c}=ce(),{extractFile:l}=M(),{setRemoveUser:n,user:u}=w(),{tema:p,setTema:f}=ne(),{label:g}=ae(),[j,_]=m.useState(!1);return t.jsxs("div",{children:[t.jsx(E,{children:e.configAgendamento_title}),t.jsxs("div",{className:"pt-2 flex flex-col gap-2 overflow-auto",style:{maxHeight:"calc(100vh - 70px)"},children:[t.jsx("label",{htmlFor:"select-language",children:t.jsxs("div",{className:d,children:[t.jsx("span",{children:e.idioma}),t.jsx(Xe,{})]})}),t.jsx("label",{htmlFor:"handleTheme",children:t.jsxs("div",{className:d,children:[t.jsx("span",{children:e.tema}),t.jsx(N,{estado:s,switchUpdate:()=>a(!s),id:"handleTheme"})]})}),t.jsx("label",{htmlFor:"handleMenuTheme",children:t.jsxs("div",{className:d,children:[t.jsx("span",{children:e.tema_menu}),t.jsxs("select",{className:"select pt-0 select-bordered select-sm w-fit max-w-xs shadow-sm",value:p,onChange:x=>{f(x.target.value)},id:"handleMenuTheme",children:[t.jsx("option",{value:"default",children:e.default}),t.jsx("option",{value:"dark",children:e.dark}),t.jsx("option",{value:"original",children:e.original}),t.jsx("option",{value:"whats",children:e.whats}),t.jsx("option",{value:"prime",children:e.prime}),t.jsx("option",{value:"dim",children:e.dim})]})]})}),t.jsx("div",{onClick:()=>window.open(v.painel_Gestor,"_blank"),className:d,children:t.jsx("span",{children:e.painel_Gestor})}),t.jsxs("div",{onClick:()=>_(!j),className:d,children:[t.jsx("span",{children:e.privacidade}),t.jsx("span",{className:"w-fit",children:j?t.jsx(I,{className:"w-6 h-6"}):t.jsx(S,{className:"w-6 h-6"})})]}),j&&t.jsx(cs,{}),t.jsx("div",{onClick:()=>{c(),o(t.jsx(ts,{}))},className:d,children:t.jsx("span",{children:e.backup})}),t.jsx("label",{htmlFor:"jsonInput",children:t.jsxs("div",{className:d,children:[t.jsx("span",{children:e.import_backup}),t.jsx("input",{type:"file",accept:".json",id:"jsonInput",className:"hidden",onChange:x=>{l(x.target.files[0]),c(),o(t.jsx(rs,{}))}})]})}),t.jsx("div",{onClick:()=>{c(),o(t.jsx(ss,{}))},className:d,children:t.jsx("span",{children:e.backupAutomatico})}),t.jsx("div",{onClick:()=>{c(),o(t.jsx(te,{}),!0)},className:d,children:t.jsx("span",{children:e.assistenteIA})}),t.jsx("div",{onClick:()=>_e(!0),className:d,children:t.jsx("span",{children:e.exportarTodosPerfis})}),t.jsxs("div",{className:"flex justify-between",children:[g.rewards.length!==0&&t.jsx("span",{className:"m-auto",children:t.jsx(Me,{})}),u.estado&&t.jsx("span",{className:"m-auto",children:t.jsx(T,{btnPremium:e.btnPremiumLogado,checkout:g.checkout})})]}),t.jsx("div",{className:"flex items-center justify-center gap-4 pb-4 pt-4",children:u.estado?t.jsx(F,{name:e.deslogar,funcao:n}):t.jsx(L,{name:e.logar,funcao:()=>{c(),o(t.jsx(oe,{}))}})})]}),t.jsx("div",{className:"absolute bottom-0 mb-[7px]",style:{width:"calc(100% - 30px)"},children:t.jsxs("div",{className:"flex justify-between",children:[u.login.length!==0&&t.jsx("kbd",{className:"kbd kbd-sm mb-1 rounded",children:u.login}),t.jsxs("kbd",{className:"kbd kbd-sm mb-1  rounded",children:[e.version," ",v.version]})]})})]})}const Rs=Object.freeze(Object.defineProperty({__proto__:null,default:ns},Symbol.toStringTag,{value:"Module"}));export{Rs as i,M as u};
