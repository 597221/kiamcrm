import{j as e,y as O,bk as R,H as B,ab as G,Q as F,U as X,ah as Q}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b10.js";import{a as x}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b4.js";import{p as V,F as q}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b5.js";import{u as J}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b33.js";import{u as K,b as Y}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b19.js";import{o as Z,U as ee,aM as te}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b23.js";import{A as ae}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b211.js";import{M as se}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b150.js";import{W as v}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b18.js";import{a as re}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b111.js";import{U as le}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b64.js";import{a as ie,b as ne,d as oe}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b169.js";import{a as ce}from"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b79.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b8.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b7.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b6.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b9.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b2.js";import"./v_7_4_1_31_281d2484-5da9-48a8-8939-2c37d755bb5b3.js";function de({userId:n,name:m}){const{agendamentosNaoDisparados:c,removeAgendamento:N,enviarAgendamento:y,buttonActive:r,openUserChat:A,setButtonActive:w,agendamentos:D}=J(),[o,I]=x.useState(r?c:c.filter(s=>s.userID===n)),{language:t}=K(),{plugin_page:M}=Y(),[T,C]=x.useState(new Map),k=async s=>{const l=await v.Contact("getProfilePictureUrl",s),{name:a}=await v.Utils("getContato",s);return{nome:a,base64:l}},E=async s=>{const l=Array.from(new Set(s.map(i=>i.userID))),a=new Map;for(const i of l){const d=await k(i);a.set(i,d)}C(a)};x.useEffect(()=>{E(o)},[o]);const p=s=>T.get(s)||{nome:"",base64:""};x.useEffect(()=>{const s=new Date().getTime(),a=(r?c:c.filter(i=>i.userID===n)).sort((i,d)=>{const L=new Date(`${i.data}T${i.hora}:00`).getTime(),$=new Date(`${d.data}T${d.hora}:00`).getTime(),P=Math.abs(L-s),W=Math.abs($-s);return P-W});I(a)},[c,r,n,D]);const{open:f}=Z(),g=50,u=37,j="calc(85vh - 300px)",h="950px",_=()=>{const s=o.length*g+u,l=parseInt(j.replace(/[^\d]/g,""));return Math.min(s,l)},H=s=>{f(e.jsx(ae,{agendamento:s,create:!1,userId:n,name:m,tipo:"relatorio"}))},b=()=>{f(e.jsx(se,{userId:n,name:m}))},U=s=>{A(s.userID),f(e.jsx(de,{userId:s.userID,name:m}))},S=({index:s,style:l})=>{const a=o[s];return e.jsxs("div",{style:l,className:"flex items-center hover:bg-base-200 rounded-lg cursor-pointer h-full border-solid border-b border-[var(--border-list)] last-of-type:border-none",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("span",{className:"break-words truncate",style:{maxWidth:"100px"},children:a.titulo})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[p(a.userID).base64==="undefined"?e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",children:e.jsx(le,{})}):e.jsx("img",{src:p(a.userID).base64,className:"w-8 h-8 rounded-full object-cover",alt:"User"}),e.jsx("p",{className:"break-words truncate",style:{maxWidth:"92px"},children:p(a.userID).nome})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.tipo}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:X.converterData(a.data)}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.hora}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.recorrenciaManual?a.recorrencia?`${a.recorrencia} ${t.dias}`:t.vazia:t[a.recorrencia]||t.vazia}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("span",{className:"break-words truncate",style:{maxWidth:"100px"},children:a.status==="enviado"?e.jsx("div",{className:"badge badge-accent text-[var(--letra)]",children:t.agenEnviado}):e.jsx("div",{className:"badge badge-error text-[var(--letra)]",children:t.agenErro})})}),e.jsxs("div",{className:"flex-1 flex items-center justify-center gap-1",children:[e.jsx("span",{className:"pulse",onClick:()=>H(a),children:e.jsx(Q,{className:"h-4 w-4"})}),e.jsx("span",{className:"pulse",onClick:()=>N(a.id,"relatorio"),children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx("span",{className:"pulse lg:tooltip lg:tooltip-bottom",onClick:()=>y(a),"data-tip":t.enviar,children:e.jsx(oe,{className:"h-4 w-4"})}),r&&n!==a.userID&&!M&&e.jsx("span",{className:"pulse lg:tooltip lg:tooltip-left",onClick:()=>U(a),"data-tip":t.agenOpenChat,children:e.jsx(te,{className:"h-4 w-4"})})]})]},a.id)},z=()=>e.jsx("div",{className:"w-full border-collapse",children:e.jsxs("div",{className:"flex font-bold",children:[e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:t.agendamento_table_titulo}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:t.agendamento_table_cliente}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:t.agendamento_table_tipo}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:t.agendamento_table_data}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:t.agendamento_table_hora}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:t.agendamento_recorrencia}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:t.status}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:t.agendamento_table_acao})]})});return e.jsxs("div",{className:"grid gap-4",style:{maxHeight:"90vh",width:h},children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"w-full flex items-center justify-between pr-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{children:t.relatorioTitle}),e.jsx("div",{className:"cursor-pointer lg:tooltip lg:tooltip-bottom tooltip-w-fit","data-tip":t.relInfoDesc,children:e.jsx("span",{className:"pulse   before:!w-44 mt-1.5",children:e.jsx(R,{className:"w-5 h-5 text-[var(--icon)]"})})}),e.jsx("div",{className:"cursor-pointer lg:tooltip lg:tooltip-right","data-tip":t.voltar,onClick:b,children:e.jsx("span",{className:"pulse",children:e.jsx(ce,{className:"w-6 h-6 text-[var(--primaria)]"})})})]}),e.jsx("button",{className:`border-solid border-[var(--primary)] border rounded-full text-center
            ${r?"bg-[var(--primary-muted)] text-white":"bg-transparent text-[var(--primary)]"}
            self-center px-3 py-[4px] pulse lg:tooltip lg:tooltip-bottom text-sm transition-all duration-300 ease-in`,onClick:()=>w(!r),"data-tip":r?t.ocultarContatosDesc:t.exibirContatosDesc,children:e.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[r?t.ocultar:t.exibirTodos,r?e.jsx(ie,{}):e.jsx(ne,{})]})})]}),e.jsx(B,{children:"Exibe o relatório dos últimos 30 envios realizados"})]}),e.jsx("div",{children:o.length>0?e.jsxs("div",{style:{height:_(),maxHeight:j,width:"100%"},children:[e.jsx(z,{}),e.jsx(V,{children:({height:s,width:l})=>e.jsx(q,{className:"AAAAAAAAAAAAAAAAAA",height:s-u,itemCount:o.length,itemSize:g,width:h,style:{overflowX:"hidden",width:h},children:S})})]}):e.jsx("div",{className:"!h-fit",children:e.jsx(G,{title:t.relNenhumAgendamentoErro,description:t.relDescricaoAgendamentos,icon:e.jsx(ee,{className:"w-7 h-7 text-[var(--primaria)]"})})})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(F,{name:t.voltar,funcao:b})})]})}export{de as default};
